---
title: "Lesson 4: dplyr" 
output:
  learnr::tutorial:
    progressive: true
    allow_skip: false
     
runtime: shiny_prerendered  
editor_options: 
  markdown: 
    wrap: 72
---

<!-- the above should be in the beginning of each lesson -->

<!-- code to format so all text appears rtl (Hebrew) -->

```{=html}
<style>
h1, h2, h3, h4, h5, h6 {
  direction: rtl;
}
p {
  direction: rtl;
}
</style>
```
<!-- tutorial options and cheching options - TODO set params -->

```{r setup, include=FALSE}
library(learnr)
library(dplyr)
library(gradethis)

tutorial_options(
  exercise.timelimit = 60,
  # A simple checker function that just returns the message in the check chunk
  exercise.checker = function(check_code, ...) {
    list(
      message = eval(parse(text = check_code)),
      correct = logical(0),
      type = "info",
      location = "append"
    )
  }
)


knitr::opts_chunk$set(error = TRUE)
```

```{r prepare-df1}

df1 = data.frame(subject = rep(1:5,each = 4),
                 trial   = rep(1:4,5),
                 score   = round(rep(1:4,5) + rnorm(20, 20,5)) %>% as.character())

```

```{r prepare-rbind}




```

## מבוא

במהלך הסמסטר עברנו על מגוון פונקציות וצורות ניתוח שנמצאות בשימוש תדיר
בניתוח נתונים והמחשה חזותית . פונקציות אלו מהוות את הבסיס לרוב הניתוחים
הנפוצים, אבל לאו דווקא יכסו את כל צרכי הניתוח שלכם.

בשיעור הנוכחי אנחנו נתייחס למקורות מידע חיצוניים, העשויים לעזור לכם
בניתוחים עתידיים.

אנחנו נתייחס לשלוש סוגי מקורות מומלצים:

1)  תיעוד מלווה של פונקציות

2)  בלוגים אינטרנטיים

3)  בינה מלאכותית

## תיעוד

המשאב הראשון שאנחנו ממליצים לעשות בו שימוש הינו התיעוד הנלווה של
פונקציות (Documentation). לכל חבילה בR מוצמד תיעוד מתאים - המפרט עבור כל
פונקציה את מטרתה, אץ הנתונים השונים שהיא יכולה או צריכה לקבל כדי לפעול
באופן תקין וכמה דוגמאות שימוש.

ניתן לגשת לתיעוד זה בשני דרכים:

### באמצעות הפקד `?`

כשנריץ סימן שאלה מךווה בשמה של פונקציה - יפתח עבורנו חלון העזרה "help"
המובנה בתוך Rstudio ובתוכה יופיע התיעוד הרלוונטי לפונקציה.

למשל - במידה ונרצה לברר איך משתמשים בפונקציה `round` נריץ את השורה הבאה:

```{r}
?round
```

הריצו את שורת הקוד בRstudio ועיינו בתיעוד הנלווה.

תוכלו לראות שהתיעוד מציג את אופן השימוש בפונקציה: היא מקבלת כאיבר ראשון
את X - שהוא האובייקט עליו נרצה להפעיל את הפונקציה, וכאיבר שני את מספר
הספרות אחרי הנקוב העשרונית אליהם נרצה לעגל (digits). במקרה זה התיעוד
כולל גם פירוט על מספר פונקציות דומות.

\*\*\*\* Q\*\*\*\*\*

### Rdocumentation

התיעוד שמוצג בחלון נשלף מתוך אתר האינטרנט
[Rdocumentation](https://www.rdocumentation.org/ "קישור לאתר"). ניתן
לגשת לתיעוד ישירות דרך האתר - או באמצעות חיפוש ברשת או באמצעות כפתור
"show in new window" שבחלק העליון של חלון העזרה (ליד סימן הבית).

המידע כאן אינו שונה מחלון העזרה, אבל ההצגה שלו על פני דף שלם בדרך כלל
נוחה יותר מאשר התצוגה בחלונית.

שאלה על פונקציה חדשה

## בלוגים אינטרנטיים

ברחבי הרשת קיים מגוון גדול של בלוגים בנושאי תכנות שונים, וR אינו שונה
משאר התכונות ושפות התכנות בהקשר זה. בחלק מהמקרים מדובר בפורומים בהם
אנשים שאלו שאלות בעבר וקיבלו תשובות שעשויות לעזור לנו בשאלה איתה אנחנו
מתמודדים ובחלקם מדובר בבלוג מסודר, בו אנשים מעלים מדריכים מפורטים לגבי
אופן השימוש בפונקציות מסויימות או הצורות בהן אפשר לבצע ניתוחים מורכבים.

משאבים אלו יכולים להיות מאוש שימושיים כדי להבין איך לבצע ניתוחים, להשתמש
בפונקציות או לפתור בעיות. הפירוט כאן לרוב יהיה עשיר יותר, לפעמים בליווי
דוגמאות או סרטונים רלוונטיים.\
\
את רוב הרשומות והשאלות בפורומים אפשר למצוא באמצעות חיפוש ברשת של הבעיה
איתה אתם מתמודדים, אך יש מספר בלוגים כללים שכדאי להכיר. ריכזנו כאן רשימה
קצרה:

1) [The R Graph Gallery](https://r-graph-gallery.com/ "קישור לאתר")-
בלוג המפרט על אופן היצירה של סוגים שונים של תרשימים, רובם באמצעות
`ggplot` ומספר חבילות המאפשרות לייצר תרשימים אינטראקטיביים.

2) Geeks for Geeks

## בינה מלאכותית

עד לאחרונה, השימוש ברשומות ופורמים היווה את המשאב העיקרי של מתכנתים, אבל
מאז העלייה של מנועי הבינה המלאכותית בשנים האחרונות מתכנתים רבים עוברים
לעשות שימוש במנועים כדוגמת chatGPT, Claude וכו'. היתרון בשימוש בבינה
מלאכותית הוא בכך שהם מאפשרים לשאול שאלות תכנותיות באופן ישיר (חלקם גם
תומכים בשאלות בעברית) ולקבל תשובה מפורטת המותאמת היטב למה שאנחנו זקוקים
לו. התוכנות מסוגלות גם לייצר קטעי קוד, קצרים או ארוכים, כדי להדגים את
התשובות שלהם, לתקן את הבעיות בקוד הנוכחי שלנו - או כדי לבצע את הניתוח
שאנחנו רוצים לעשות בשלמותו.\
\
הכלים האלו מגבירים את היכולות של מתכנתים רבים ומאפשרים להם לפתור בעיות
שעולות במהלך הדרך באופן מהיר ויעיל. עם זאת, הוא לא תמיד מהווה תרופת קסם
ויש כמה שימושים שלא מומלץ לעשות באמצעותם.\
\
בפרק הנוכחי נדבר על מספר שימושים מומלצים ונציים כמה אזהרות חשובות

### בירור לגבי פונקציות

השימוש הנפוץ ביותר בבינה מלאכתותי, בו הוא גם בדרך כלל מצטיין, כולל
התייחסות אליו כאל מאגר מידע. במקום לנסות מילות מפתח שונות עד שתמצאו את
הפונקציה הספציפית שאתה אותם צריכים או רשומה נוחה לגבי אופן השימוש בה -
התוכנה בדרך כלל תדע לספק לכם תשובות מהירות ומבוססות לגבי איזו פונקציה
מבצעת את הפעולה שאתם צריכים או לגבי הדרכים השונות להשתמש בפונקציה
נתונה.\
\
גם כאן יכולות להיות טעויות והתכנה לעיתים תמציא פונקציות או תשמשתש בהן
בצורה לא נכונה, אבל ברוב המקריפ הפשוטים היא מספקת מענה מוצלח מאוד. בכל
אופן -נוכל לבדוק את התשובות שלה באופן מיידי, או באמצעות הרצת הפונקציה או
באמצעות עיון בתיעוד של הפונצקיה וברשומות קיימות לגביה.

`תרגיל` : בררו איזו פונקציה יכולה לשמש אותנו

```{r}
sdsd
```

### פתרון תקלות

אחד העיסוקים הכי מתסלכים בתכנות בכלל, ובניתוח נתונים בR בפרט, הוא שמדי
פעם אנחנו נתקלים בתקלות ובעיות בהרצה שלא תמיד ברור לנו איך עלינו לפתור
אותן. הפלט בR יכול להכווין אותנו לפונקציה שבה ארעה התקלה - אבל גם אז
לפעמים קשה להבין ממה התקלה נובעת.\

מנועי בינה מלאכותית מעולים כדי לעזור לנו לצאת מהבוץ במקרים כאלו. אם
נדביק את הפלט של השגיאה למנוע הבינה המלאכותית הוא יוכל להסביר לנו בפירוט
את המשמעות של השגיאה שחווינו. הוא לא תמיד יוכל להסיק את שורש הבעיה, אבל
הוא יוכל לתתלנו הבנה ראשונית של הבעיה לכל הפחות.\
\
אם נצרף לפנייה שלנו גם את החלק הבעייתי בקוד התוכנה תוכל להבין בצורה טובה
יותר את מקור הבעייה ובמקרים רבים גם להציע לנו איך לתקן אותה או לספק לנו
קטע קוד מתוקן.

`תרגיל` הריצו את קטע הקוד הבאה והיעזרו במנוע בינה מלאכותית לבחירתכם כדי
להבין את מקור השגיאות ולתקן אותן

```{r warnings, exercise = T, exercise.setup = "prepare-df1"}
# df1:
# הטבלה מתארת את הציונים של נבדק בכמה חזרות שונות של אותה המטלה

# subject - המספר המזהה של הנבדק
# score  - ציון הנבדק
# trial   - מספר החזרה

df1 %>% head() %>% print() # הדפסת השורות הראשונות

df1_summary = df1 %>% 
  group_by(subject) %>%                           # סיכום לכל נבדק של 
  summarise(max = max(score, na.rm = T),         # הציון המירבי שלו 
            trial_amount = max(trial, na.rm = T), # מספר החזרות שביצע
            mean_score = mean(score))             # והציון הממוצע


```

**שימו לב:** אמנם מדובר בכלי שימושי, אבל גם הוא טועה מדי פעם. ע.

## יצירת קטעי קוד

הכי מפתה

צריך להיעשות בזהירות - חייבים להבין מה הוא עושה

אחרת הוא הרבה פעמים ייעשה דברים שונים
