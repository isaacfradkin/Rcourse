---
title: "Final exercise = first semester" 
output:
  learnr::tutorial:
    progressive: true
    allow_skip: false
runtime: shiny_prerendered  

editor_options: 
  markdown: 
    wrap: 72
---

```{=html}
<style>
h1, h2, h3, h4, h5, h6 {
  direction: rtl;
}
p {
  direction: rtl;
}

.text-block1 {
  direction: rtl;       /* Set text direction to right-to-left */
  text-align: right;
  background-color: #f0f0f0; /* Light grey background */
  padding: 10px;
  border-radius: 5px;
  border: 1px solid #ddd; /* Light border */
  margin: 10px 0; /* Space around the block */
  
</style>
```

```{r setup, include=FALSE}
library(learnr)
library(gradethis)
library(Rcourse)

tutorial_options(
  exercise.timelimit = 60,
  # A simple checker function that just returns the message in the check chunk
  exercise.checker = function(check_code, ...) {
    list(
      message = eval(parse(text = check_code)),
      correct = logical(0),
      type = "info",
      location = "append"
    )
  }
)

knitr::opts_chunk$set(error = TRUE)
gradethis::gradethis_setup()
```


## תרגיל מסכם סמסטר א'


השיעור שלפניכם כולל תרגיל המסכם את החומר שנלמד בסמסטר א'. השיעור ילווה אתכם בניתוח של נתונים אמיתיים ממטלה קוגנטיבית מא' ועד ת' ובמהלכו ניישם את מרבית החומר שנלמד במהלך הסמסטר.

את התרגיל עצמו מומלץ לפתור בסביבת העבודה בRstudio, במקביל לקריאת קובץ זה.


הנתונים איתם נעבוד כוללים 2 טבלאות - טבלה אחת המכילה את תשובותיהם של הנבדקים בשאלון *** וטבלה נוספת המכילה פירוט של תגובות הנבדקים וזמני התגובה שלהם במטלת "סטרופ". במטלה זו נבדקים מתבקשים לציין את הצבע של מילים שונות המופיעות על המסך, תוך התעלמות מהתוכן שלהן. כשהמילה שמופיעה תואמת לצבע בו היא כתובה המטלה הינה קלה - ולכן מצופה מנבדקים להגיב באופן תקין ובאופן מהיר, אך כשיש חוסר תאימות בין הצבע לטקסט המטלה קשה יותר וזמן התגובה צפוי להתארך.

ניתן להתנסות בגרסה אינרנטית של המטלה בקישור הזה.

https://faculty.washington.edu/chudler/java/ready.html


## מטלת הסטרופ

הורידו מהמודל את הטבלה "stroop_data.csv" וייבאו אותה לסביבת העבודה שלכם.

הטבלה מכילה פרטים אודות כל סבב במטלה - איזה גירוי הוצג, מה היתה התגובה של הנבדק ומה היה אורך זמן התגובה שלו (במילישניות).

האפקט שמעניין אותנו בנתונים אלו הוא ההפרש בין זמן התגובה עבור סבבים בהם הייתה תאימות בין הצבע והטקסט של הגירוי לבין שלבים בהם אלו היו שונים זה מזה.

בנוסף לכך, נחשב גם את כמות הסבבים בהם כל נבדק טעה.


כדי שנוכל להתחיל בניתוח נצטרך לייצר שתי עמודות נוספות מתוך הנתונים הקיימים בטבלה:

1) עמודת המתארת האם הנבדק צדק או טעה. עמודה זו תבחן האם התגובה של הנבדק זהה ל**צבע** של הגירוי. נקרא לעמודה זו בשם "correct".

2) עמודה שתקודד האם יש התאמה בין צבע הגירוי לטקסט שמופיע בו. לעמודה זו נקראה "condition".


### סיכום ראשוני

לאחר שיצרתם את שתי העמודות הנ"ל, נוכל בצע סיכום ראשוני של תוצאות המטלה.

עבור כל נבדק חשבו את:
   כמות הסבבים שהוא ביצע
   את מספר הסבבים מתוכם בהם הצבע של הגירוי תאם לטקסט 
   ואת אחוז הסבבים בהם הנבדק הגיב נכונה


```{r text_Q1, echo = FALSE}

question_text( 
  "<div style='direction: rtl;'>
מה היה אחוז המענה הנכון מצד הנבדק השני (session_id = 668587)? 
  </div>",
  answer("0.889", correct = TRUE),
  answer("0.89", correct = TRUE),
  allow_retry = TRUE
)

```


### זמני תגובה - סינון

כעת נעבור לחישוב זמן התגובה הממוצע עבור כל תנאי, עבור כל נבדק - אך לפני כן, נצטרך לסנן את זמני התגובה כדי שלא יכללו תוצאות קיצוניות ובלתי סבירות.

תוצאות כאלו יכולות לנבוע מכך שנבדק איבד ריכוז במטלה לקח הפסקה ואינן משקפות את זמן התגובה האמיתי של הנבדק. במידה ונשאיר את תצפיות אלו הן עלולות להטות את התוצאות שלנו באופן משמעותי - ולכן חשוב שנסנן אותן לפני חישוב הממוצעים.


כדי להבין האם יש בנתונים שלנו תצפיות קיצוניות ניעזר בהצגת זמני התגובה בהיסטוגרמה. צרו היסטוגרמה שכזהו באמצעות `ggplot`.

משהו נראה קצת מוזר?

הסיבה לכך היא שככל הנראה ישנן מספר תצפיות קיצוניות מאוד, שגורמות לתכנה להציג את זמני התגובה על ציר מאוד רחב - כשבפועל רוב זמני התגובה מרוכזים בקצה השמאלי של הציר.

ציירו את ההיסטוגרמה שוב - אך הפעם הגבילו את ציר האיקס בין 0 ל5000.


על פי התוצאות המוצגות בטבלה, מהו לדעתכם הרף העליון הסביר לזמני התגובה?


סננו את הטבלה כך שתכיל רק זמני תגובה הקטנים מ3000 מילי שניות


```{r text_Q2, echo = FALSE}

question_text( 
  "<div style='direction: rtl;'>
כמה תצפיות סיננתם?
  </div>",
  answer("629", correct = TRUE),
  allow_retry = TRUE
)

```


בנוסף, סננו מהטבלה גם את כל הסבבים בהם הנבדקים טעו בתגובותיהם. סבבים כאלו מעידים על כך שהמטלה לא נעשתה כשורה ולכן לא נרצה לכלול את זמני התגובה של סבבים אלו בממוצעים שנחשב.


```{r text_Q3, echo = FALSE}

question( 
  "<div style='direction: rtl;'>
בדקו - האם הקובץ מכיל ערכים חסרים?
  </div>",
  answer("כן"),
  answer("לא", correct = TRUE),
  allow_retry = TRUE
)

```


### חישוב ממוצעי זמני התגובה

עכשיו שסיננו את זמני התגובה ווידאנו שהנתונים תקינים - נוכל לחשב את זמן התגובה הממוצע עבור כל תנאי, עבור כל נבדק.

היעזרו בפונקציות `group_by` ו`summarise`.


לאחר שחישבנו את הממוצעים - נרצה לחשב עבור כל נבדק את ההפרש בין ממוצע זמן התגובה בתנאי של חוסר התאמה בין המבע לטקסט - לממוצע זמן התגובה בתנאי התואם.

מומלץ להעביר את טבלת הממוצעים לפורמט רחב ולחשב את ההפרש בין העמודות שנוצרו.



## עיבוד נתוני השאלון




## הגשה
  עברו על הקובץ וודאו שהגשתם את כל התרגילים ועניתם על כל השאלות
  
  במידה וכל התשובות שלכם תקינות יש ללחוץ על הכפתור:  Generate, להעתיק את הטקסט שמופיע בחלון למטה ולהגישו במודל  
  בהצלחה!

```{r context="server"}
learnrhash::encoder_logic()
```

```{r encode, echo=FALSE}
learnrhash::encoder_ui()
```